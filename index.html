<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>虚拟恐龙博物馆</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { font-family: 'Arial', sans-serif; background-color: #f8f8f8; scroll-behavior: smooth; overflow-x: hidden; }
header { background-color: #2c3e50; color: white; padding: 20px 0; text-align: center; position: sticky; top: 0; z-index: 999;}
nav a { color: white; margin: 0 15px; text-decoration: none; font-weight: bold; }
nav a:hover { text-decoration: underline; }
.section { padding: 60px 20px; opacity: 0; transition: opacity 0.8s ease; }
.section.visible { opacity: 1; }
.timeline { border-left: 3px solid #2c3e50; margin-left: 20px; padding-left: 20px; }
.timeline-item { opacity: 0; transform: translateX(-50px); margin-bottom: 20px; transition: all 0.8s ease; }
.timeline-item.visible { opacity: 1; transform: translateX(0); }
canvas { width: 100%; height: 500px; display: block; background-color: #000; cursor: pointer; }
footer { background-color: #2c3e50; color: white; text-align: center; padding: 20px 0; margin-top: 40px; }
.model-buttons button { margin: 5px; }
</style>
</head>
<body>

<header>
<h1>虚拟恐龙博物馆</h1>
<nav>
<a href="#home">首页</a>
<a href="#gallery">展览馆</a>
<a href="#timeline">恐龙时间轴</a>
<a href="#education">教育资源</a>
</nav>
</header>

<section id="home" class="section visible text-center">
<h2>欢迎来到恐龙的世界</h2>
<p>探索史前巨兽，体验互动3D模型，了解恐龙进化历程。</p>
</section>

<section id="gallery" class="section container">
<h2 class="mb-4">3D 恐龙模型展示</h2>
<div class="model-buttons mb-3 text-center">
<button class="btn btn-primary" onclick="switchModel('T-Rex')">暴龙 T-Rex</button>
<button class="btn btn-success" onclick="switchModel('Triceratops')">三角龙 Triceratops</button>
<button class="btn btn-warning" onclick="switchModel('Velociraptor')">迅猛龙 Velociraptor</button>
</div>
<canvas id="dinoCanvas"></canvas>
<p class="mt-3">模型来源: <a href="https://github.com/KhronosGroup/glTF-Sample-Models" target="_blank">glTF Sample Models</a></p>
</section>

<section id="timeline" class="section container">
<h2 class="mb-4">恐龙时间轴</h2>
<div class="timeline">
  <div class="timeline-item">2.3亿年前：恐龙首次出现在三叠纪晚期</div>
  <div class="timeline-item">1.5亿年前：中侏罗纪，蜥脚类恐龙繁盛</div>
  <div class="timeline-item">6600万年前：白垩纪末期恐龙灭绝</div>
</div>
</section>

<section id="education" class="section container">
<h2 class="mb-4">教育资源</h2>
<div class="row">
<div class="col-md-4">
<img src="https://rawcdn.githack.com/niuguanwen123-ship-it/dino-virtual-museum/main/images/fossil1.jpg" class="img-fluid" alt="恐龙化石">
<p>恐龙化石示例</p>
</div>
<div class="col-md-4">
<img src="https://rawcdn.githack.com/niuguanwen123-ship-it/dino-virtual-museum/main/images/dino1.jpg" class="img-fluid" alt="恐龙复原图">
<p>恐龙复原图</p>
</div>
<div class="col-md-4">
<img src="https://rawcdn.githack.com/niuguanwen123-ship-it/dino-virtual-museum/main/images/fossil2.jpg" class="img-fluid" alt="化石研究">
<p>化石研究示意</p>
</div>
</div>
</section>

<footer>
<p>&copy; 2025 虚拟恐龙博物馆</p>
</footer>

<!-- Three.js + GLTFLoader -->
<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.module.js';
import { GLTFLoader } from 'https://cdn.jsdelivr.net/npm/three@0.150.1/examples/jsm/loaders/GLTFLoader.js';
import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.150.1/examples/jsm/controls/OrbitControls.js';

// Three.js 场景
const canvas = document.getElementById('dinoCanvas');
const renderer = new THREE.WebGLRenderer({ canvas, antialias:true });
renderer.setSize(canvas.clientWidth, 500);

const scene = new THREE.Scene();
scene.background = new THREE.Color(0xaaaaaa);

const camera = new THREE.PerspectiveCamera(45, canvas.clientWidth / 500, 0.1, 1000);
camera.position.set(0, 1.5, 3);

const controls = new OrbitControls(camera, renderer.domElement);
controls.enablePan = false;
controls.enableZoom = false;

const light = new THREE.HemisphereLight(0xffffff, 0x444444);
light.position.set(0,20,0);
scene.add(light);

let currentModel = null;
const loader = new GLTFLoader();
const models = {
  "T-Rex": "https://rawcdn.githack.com/KhronosGroup/glTF-Sample-Models/master/2.0/T-Rex/glTF-Binary/T-Rex.glb",
  "Triceratops": "https://rawcdn.githack.com/KhronosGroup/glTF-Sample-Models/master/2.0/Triceratops/glTF-Binary/Triceratops.glb",
  "Velociraptor": "https://rawcdn.githack.com/KhronosGroup/glTF-Sample-Models/master/2.0/Velociraptor/glTF-Binary/Velociraptor.glb"
};

function switchModel(name){
  if(currentModel) scene.remove(currentModel);
  loader.load(models[name], function(gltf){
    currentModel = gltf.scene;
    scene.add(currentModel);
    currentModel.position.set(0,0,0);
  }, undefined, function(error){ console.error(error); });
}
switchModel('T-Rex');

// 点击放大交互
let zoomed = false;
canvas.addEventListener('click', ()=>{
  if(!currentModel) return;
  zoomed = !zoomed;
  if(zoomed){
    camera.position.set(0,1,1.5); // 靠近模型
  } else {
    camera.position.set(0,1.5,3); // 复原
  }
});

// 渲染动画
function animate(){
  requestAnimationFrame(animate);
  if(currentModel) currentModel.rotation.y += 0.005;
  controls.update();
  renderer.render(scene,camera);
}
animate();

// 滚动时间轴 + 页面淡入
const sections = document.querySelectorAll('.section');
const timelineItems = document.querySelectorAll('.timeline-item');
function onScroll(){
  const triggerBottom = window.innerHeight * 0.8;
  sections.forEach(sec => {
    const secTop = sec.getBoundingClientRect().top;
    if(secTop < triggerBottom) sec.classList.add('visible');
  });
  timelineItems.forEach(item => {
    const itemTop = item.getBoundingClientRect().top;
    if(itemTop < triggerBottom) item.classList.add('visible');
  });
}
window.addEventListener('scroll', onScroll);
onScroll();

// 导航平滑切换 + 淡入
document.querySelectorAll('nav a').forEach(link=>{
  link.addEventListener('click', e=>{
    e.preventDefault();
    const target = document.querySelector(link.getAttribute('href'));
    target.scrollIntoView({behavior:'smooth'});
  });
});
</script>

</body>
</html>
